# No Middleware Example
#
# This example demonstrates backward compatibility with the new source_subscriptions format.
# Sources can have empty pipelines, meaning no data transformation is applied.
#
# Use Case: Simple data passthrough, pre-processed data, or testing

server_core:
  id: simple-passthrough

sources:
  # Clean data source - no transformation needed
  - id: clean_data_source
    source_type: application
    auto_start: true

  # Pre-validated source - ready to query
  - id: validated_source
    source_type: application
    auto_start: true

queries:
  - id: simple-query
    query: |
      MATCH (n:Item)
      WHERE n.status = 'active'
      RETURN n.id, n.name, n.price, n.status

    # No middleware defined - sources provide clean data

    # Empty pipelines for all sources
    source_subscriptions:
      - source_id: clean_data_source
        pipeline: []  # No transformation

      - source_id: validated_source
        pipeline: []  # No transformation

    auto_start: true

  # Another example: Single source, no middleware
  - id: direct-query
    query: |
      MATCH (p:Product)
      RETURN p.id, p.name, p.category

    source_subscriptions:
      - source_id: clean_data_source
        pipeline: []

    auto_start: true

reactions:
  - id: simple-logger
    reaction_type: log
    queries: [simple-query, direct-query]
    properties:
      log_level: info
    auto_start: true

# Test Data (send directly, no transformation):
# {
#   "id": "item-1",
#   "name": "Widget",
#   "price": 29.99,
#   "status": "active"
# }
#
# Data arrives at query unchanged:
# {
#   "id": "item-1",
#   "name": "Widget",
#   "price": 29.99,
#   "status": "active"
# }

# Notes:
# - Empty pipelines (pipeline: []) are the default for backward compatibility
# - Data flows directly from source to query without transformation
# - Use this pattern when:
#   * Sources provide clean, validated data
#   * Transformation happens before DrasiServerCore
#   * Testing or debugging data flow
#   * Performance is critical and transformation is unnecessary
