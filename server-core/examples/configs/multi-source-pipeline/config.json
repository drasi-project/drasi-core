{
  "server": {
    "id": "multi-source-pipeline"
  },
  "sources": [
    {
      "id": "sensor-stream",
      "source_type": "mock",
      "auto_start": true,
      "properties": {
        "data_type": "sensor",
        "interval_ms": 1000,
        "initial_count": 0
      }
    },
    {
      "id": "user-data",
      "source_type": "mock",
      "auto_start": true,
      "properties": {
        "data_type": "person",
        "interval_ms": 10000,
        "initial_count": 0
      },
      "bootstrap_provider": {
        "type": "scriptfile",
        "file_paths": ["/data/users.jsonl"]
      }
    },
    {
      "id": "event-stream",
      "source_type": "mock",
      "auto_start": true,
      "properties": {
        "data_type": "event",
        "interval_ms": 2000,
        "initial_count": 10
      }
    }
  ],
  "queries": [
    {
      "id": "high-temp-alert",
      "query": "MATCH (s:SensorReading) WHERE s.temperature > 80 RETURN s",
      "queryLanguage": "Cypher",
      "sources": ["sensor-stream"],
      "auto_start": true,
      "properties": {
        "description": "Alert on high temperature readings",
        "threshold": 80
      }
    },
    {
      "id": "user-activity",
      "query": "MATCH (u:Person)-[:TRIGGERED]->(e:Event) RETURN u, e",
      "queryLanguage": "Cypher",
      "sources": ["user-data", "event-stream"],
      "auto_start": true,
      "properties": {
        "description": "Track user activity patterns"
      }
    },
    {
      "id": "sensor-summary",
      "query": "MATCH (s:SensorReading) RETURN s.location, avg(s.temperature) as avg_temp",
      "queryLanguage": "Cypher",
      "sources": ["sensor-stream"],
      "auto_start": true,
      "properties": {
        "description": "Aggregate sensor readings by location"
      }
    }
  ],
  "reactions": [
    {
      "id": "critical-alert-webhook",
      "reaction_type": "log",
      "queries": ["high-temp-alert"],
      "auto_start": true,
      "properties": {
        "log_level": "warn",
        "format": "json",
        "include_metadata": true
      }
    },
    {
      "id": "activity-analytics",
      "reaction_type": "log",
      "queries": ["user-activity"],
      "auto_start": true,
      "properties": {
        "log_level": "info",
        "format": "json",
        "batch_size": 100
      }
    },
    {
      "id": "dashboard-feed",
      "reaction_type": "log",
      "queries": ["sensor-summary"],
      "auto_start": true,
      "properties": {
        "log_level": "debug",
        "format": "json",
        "update_interval": 5000
      }
    }
  ]
}